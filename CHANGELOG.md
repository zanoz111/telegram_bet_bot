# История изменений

## Версия 2.0 (27.01.2026)

### Новые функции

#### 1. Название пари
- Добавлен новый шаг 0 в визарде создания пари
- Возможность ввести произвольное название пари
- Кнопки быстрого выбора: BO1, BO3, BO5
- Название отображается в карточке пари

#### 2. Улучшенный ввод матча
- Поддержка разделителя "пробел" помимо "vs"
- Примеры: `inz vs troolz` или `inz troolz`
- Оба варианта работают одинаково

#### 3. Кнопки выбора игроков
- Добавлены кнопки с 16 игроками для быстрого выбора
- Список игроков:
  - ash, AGENT, cYphER, rapha
  - pavel, k1llsen, Spart1e, baksteen
  - prox1mo, SV, swex, cherepoff
  - RAISY, fog, fire_bot, ARSENY
- Выбор происходит в 2 клика: сначала первый игрок, затем второй

#### 4. Меню бота
- Добавлено встроенное меню Telegram
- Команды доступны через кнопку меню:
  - `/start` - Главное меню
  - `/create_match` - Создать пари
- Команды отображаются в интерфейсе Telegram

### Технические изменения

#### База данных
- Добавлено поле `bet_name` в таблицу `bets`
- Автоматическая миграция для существующих баз данных
- Новая функция `update_bet_name()` для обновления названия

#### Модели
- Обновлена модель `Bet` с полем `bet_name`
- Обновлены методы `to_dict()` и `from_dict()`

#### Обработчики
- Переработан визард создания пари (теперь 4 шага вместо 3)
- Добавлена обработка callback для выбора названия (`betname_`)
- Добавлена обработка callback для выбора игроков (`player_`)
- Улучшенный парсинг матча с поддержкой двух разделителей

#### Константы
- Новый файл `constants.py` со списками:
  - `PLAYERS` - список игроков
  - `BET_NAMES` - готовые названия пари

### Структура шагов создания пари

1. **Шаг 0/4** - Название пари
   - Свободный ввод или выбор из кнопок (BO1/BO3/BO5)

2. **Шаг 1/4** - Матч
   - Свободный ввод с разделителями `vs` или пробел
   - Или выбор из кнопок (2 клика)

3. **Шаг 2/4** - Коэффициенты
   - Ввод двух коэффициентов через пробел

4. **Шаг 3/4** - Сумма ставки
   - Свободный ввод или выбор из кнопок (500/1000/1500/2000 ₽)

### Совместимость
- Полная обратная совместимость с существующими пари
- Старые пари без названия корректно отображаются
- Миграция базы данных происходит автоматически при запуске
